# WIth the help of https://github.com/darryk10/CVE-2022-22963/blob/main/Dockerfile

FROM ubuntu:20.04

RUN apt update
RUN apt install -y wget curl unzip
RUN apt install -y openjdk-8-jdk maven

RUN wget https://github.com/spring-cloud/spring-cloud-function/archive/refs/tags/v3.1.6.zip && \
	unzip v3.1.6.zip && \
	cd spring-cloud-function-3.1.6/spring-cloud-function-samples/function-sample-pojo && \
	mvn package

EXPOSE 8080

RUN mkdir /app
RUN cp /spring-cloud-function-3.1.6/spring-cloud-function-samples/function-sample-pojo/target/function-sample-pojo-2.0.0.RELEASE.jar /app/spring-boot-application.jar
CMD ["java", "-jar", "/app/spring-boot-application.jar"]